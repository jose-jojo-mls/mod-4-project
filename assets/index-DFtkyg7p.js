(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const h=async e=>{try{const t=await fetch(`https://db.ygoprodeck.com/api/v7/cardinfo.php?id=${e}`);if(!t.ok)throw Error("Failed to fetch card details");return{data:(await t.json()).data[0],error:null}}catch(t){return{data:null,error:t}}},y=async e=>{try{const t=await fetch(`https://db.ygoprodeck.com/api/v7/cardinfo.php?fname=${e}`);if(!t.ok)throw Error("Failed to fetch card details");return{data:(await t.json()).data[0],error:null}}catch(t){return{data:null,error:t}}},g=async()=>{try{const e=await fetch("https://db.ygoprodeck.com/api/v7/cardinfo.php?num=20&offset=0&sort=random&cachebust");if(!e.ok)throw new Error("Failed to fetch card details");return{data:(await e.json()).data,error:null}}catch(e){return{data:null,error:e}}},w=async e=>{const t=document.querySelector("#cards-list");t.innerHTML="",e.forEach(n=>{const c=document.createElement("li"),o=document.createElement("img"),r=document.createElement("h3"),a=document.createElement("p");c.dataset.id=n.id,o.src=n.card_images[0].image_url_small,o.alt=n.name,r.textContent=n.name,a.textContent=n.type,o.classList.add("img"),c.classList.add("card"),c.append(o,r,a),t.append(c)})},u=e=>{const t=document.querySelector("#card-details"),n=document.querySelector("#card-title"),c=document.querySelector("#card-description"),o=document.querySelector("#card-img"),r=document.querySelector("#card-atk"),a=document.querySelector("#card-def"),d=document.querySelector("#card-stars"),s=document.querySelector("#tester"),i=document.querySelector("#monster-stats");t.classList.remove("hidden"),s.classList.remove("hidden"),s.style.animation="none",s.offsetHeight,s.style.animation="slideIn 0.6s ease-out forwards",n.textContent=e.name,c.textContent=e.desc,o.src=e.card_images[0].image_url_small,o.alt=e.name,o.classList.add("img"),e.atk!==void 0?(i.classList.remove("hidden"),r.textContent=`ATK: ${e.atk}`,a.textContent=e.def!==null?`DEF: ${e.def}`:`Link-${e.linkval}`,d.textContent=`STARS: ${e.level}`):i.classList.add("hidden"),o.onclick=()=>S(e)},S=e=>{const t=document.querySelector("#deck-modal"),n=document.querySelector("#deck-modal-title"),c=document.querySelector("#deck-modal-list"),o=document.querySelector("#deck-modal-close");t.classList.remove("hidden"),n.textContent=`${e.name} â€” Market Prices`,c.innerHTML="",e.card_prices.forEach((r,a)=>{if(e.card_prices.length>1){const s=document.createElement("li");s.textContent=`Printing ${a+1}`,s.classList.add("printing-label"),c.append(s)}[{name:"TCGPlayer",price:r.tcgplayer_price,url:`https://www.tcgplayer.com/search/yugioh/product?q=${encodeURIComponent(e.name)}`},{name:"TCGPlayer (Foil)",price:r.tcgplayer_price_foil,url:`https://www.tcgplayer.com/search/yugioh/product?q=${encodeURIComponent(e.name)}`},{name:"CardMarket",price:r.cardmarket_price,url:`https://www.cardmarket.com/en/YuGiOh/Products/Search?searchString=${encodeURIComponent(e.name)}`},{name:"CardMarket (Foil)",price:r.cardmarket_price_foil,url:`https://www.cardmarket.com/en/YuGiOh/Products/Search?searchString=${encodeURIComponent(e.name)}`},{name:"eBay",price:r.ebay_price,url:`https://www.ebay.com/sch/i.html?_nkw=${encodeURIComponent(e.name)}+yugioh`},{name:"Amazon",price:r.amazon_price,url:`https://www.amazon.com/s?k=${encodeURIComponent(e.name)}+yugioh`},{name:"Cool Stuff Inc",price:r.coolstuffinc_price,url:`https://www.coolstuffinc.com/main_search.php?q=${encodeURIComponent(e.name)}`},{name:"Cool Stuff (Foil)",price:r.coolstuffinc_price_foil,url:`https://www.coolstuffinc.com/main_search.php?q=${encodeURIComponent(e.name)}`}].forEach(({name:s,price:i,url:f})=>{if(i===void 0)return;const m=document.createElement("li"),p=i&&i!=="0.00"?`$${i}`:"N/A";m.innerHTML=`<a href="${f}" target="_blank">${s}: <strong>${p}</strong></a>`,c.append(m)})}),o.onclick=()=>t.classList.add("hidden"),t.onclick=r=>{r.target===t&&t.classList.add("hidden")}},C=document.querySelector("#list-section"),l=document.querySelector("#search-form");g().then(e=>{e.data===null&&alert("Could not find card data. Please try again."),w(e.data)});C.addEventListener("click",e=>{document.querySelector("#card-details").scrollIntoView({behavior:"smooth",block:"start"});const n=e.target.closest("li").dataset.id;h(n).then(c=>{if(c.error)throw Error(c.error.message);u(c.data)}).catch(c=>{console.log(c)})});l.addEventListener("submit",e=>{e.preventDefault(),document.querySelector("#card-details").scrollIntoView({behavior:"smooth",block:"start"});const t=l.elements.query.value;y(t).then(n=>{if(n.error)throw new Error(n.error.message);u(n.data)}).catch(n=>{console.log(n)}),l.reset()});
